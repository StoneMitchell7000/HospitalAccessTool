<div class="drilldown-layout">
    <div>
        <div class="title-block top-title">Visits</div>
        <button (click)="updateVisit(0)" mat-icon-button class="add-button" matTooltip="Add Visit"
            matTooltipPosition="right" matTooltipShowDelay="400"><i class="material-icons">add_circle</i>
        </button>
        <button mat-button class="back-button" (click)="goBack()" matRipple [matRippleUnbounded]="false"
            [matRippleCentered]="true" [matRippleColor]="'rgba(255, 255, 255, 100)'">
            <mat-icon matSuffix>arrow_back_ios</mat-icon>
            Back
        </button>
    </div>
    <div class="relative-wrapper">
        <div class="visits-box">
            <div *ngFor="let visit of visits" class="visit-chip"
                [ngClass]="{'selected-chip' : visit.visitId === selectedVisitId}" (click)="selectVisit(visit)" matRipple
                [matRippleUnbounded]="false" [matRippleCentered]="true" [matRippleColor]="'#ff6767be'">
                <div class="chip-start-date">{{visit.formatInDate | date:'MM/dd/yyyy'}} -</div>
                <div class="chip-end-date">{{visit.formatOutDate | date:'MM/dd/yyyy'}}</div>
                <!-- <button (click)="updateVisit(visit)" #focus
                    [ngClass]="{'hidden-button' : visit.visitId !== selectedVisitId}" mat-icon-button
                    class="edit-button visit-edit" matTooltip="Edit Visit" matTooltipPosition="right"
                    matTooltipShowDelay="400"><i class="material-icons edit-button-icon">edit_square</i>
                </button> -->
            </div>
        </div>
    </div>
    <div>
        <div class="title-block">Procedures</div>
        <button (click)="addProc()" mat-icon-button class="add-button" matTooltip="Add Procedure" matTooltipPosition="right"
            matTooltipShowDelay="400"><i class="material-icons">add_circle</i>
        </button>
    </div>
    <div class="relative-wrapper">
        <div class="procedure-table animated fadeIn">
            <div class="procedure-relative-wrapper">
                <div class="procedure-header procedure-row">
                    <div style="border-top-left-radius: 4px;">Procedure</div>
                    <div>Date & Time</div>
                    <div>Department</div>
                    <div>Results</div>
                    <!-- <div>Performed By</div> -->
                    <div>Floor #</div>
                    <div>Room #</div>
                    <div>Notes</div>
                    <div style="border-top-right-radius: 4px;"></div>
                </div>
                <div class="procedure-scroll-container">
                    <div *ngFor="let proc of visitProcedures">
                        <div class="procedure-row animated fadeInUp">
                            <div>{{proc.procedure}}</div>
                            <div>{{proc.formatDate | date:'MM/dd/yyyy hh:mm a'}}</div>
                            <div>{{proc.department}}</div>
                            <div>{{proc.results}}</div>
                            <!-- <div>{{proc.performedBy}}</div> -->
                            <div>{{proc.floorNumber}}</div>
                            <div>{{proc.roomNumber}}</div>
                            <div>{{proc.notes}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div>
        <div class="title-block">Perscriptions</div>
        <button (click)="addMed()" mat-icon-button class="add-button" matTooltip="Add Perscription"
            matTooltipPosition="right" matTooltipShowDelay="400"><i class="material-icons">add_circle</i>
        </button>
    </div>
    <div class="relative-wrapper">
        <div class="medication-box">
            <div class="medication-tile animated fadeInRight" *ngFor="let med of visitMeds">
                <!-- <button mat-icon-button class="edit-button" matTooltip="Edit Perscription" matTooltipPosition="below"
                    matTooltipShowDelay="400"><i class="material-icons edit-button-icon">edit_square</i>
                </button> -->
                <div style="margin-top: 4px;">
                    <mat-form-field class="medication-field">
                        <mat-label>Medication</mat-label>
                        <mat-select [(ngModel)]="med.medicationId" readonly [disabled]="true">
                            <mat-option *ngFor="let availableMed of availableMeds" [value]="availableMed.medicationId"
                                matTooltip="Used For: {{availableMed.usedFor}}
                                            Reccomended Dose: {{availableMed.recommendedDose}}
                                            Reccomended Frequency: {{availableMed.recommendedFrequency}}"
                                matTooltipPosition="right" matTooltipShowDelay="0">
                                {{availableMed.medicationName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field class="medication-field">
                        <mat-label>Dose</mat-label>
                        <input matInput [(ngModel)]="med.dose" readonly>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field class="medication-field">
                        <mat-label>Frequency</mat-label>
                        <input matInput [(ngModel)]="med.frequency" readonly>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field class="medication-field">
                        <mat-label>Start Date</mat-label>
                        <input matInput [matDatepicker]="picker" readonly [ngModel]="med.startDate">
                        <!-- <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle> -->
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field class="medication-field">
                        <mat-label>End Date</mat-label>
                        <input matInput [matDatepicker]="picker2" readonly [ngModel]="med.endDate">
                        <!-- <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle> -->
                        <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>
        </div>
    </div>
</div>